services:
  apigateway:
    image: apigateway
    restart: "unless-stopped"
    ports:
      - "8087:8080"
      - "8000:8000"
    links:
      - orientdb
    environment:
      NODE_ENV: production
      SERVER_PORT: "8080"
      LOGGING_LEVEL_ROOT: $LOGGING_LEVEL_ROOT
      JAVA_TOOL_OPTIONS: "-Xmx128m"
      EUREKA_CLIENT_SERVICEURL_DEFAULTZONE: $EUREKA_CLIENT_SERVICEURL
      SPRING_CLOUD_CONFIG_DISCOVERY_SERVICE_ID: "apigateway"
      SPRING_RABBITMQ_HOST: $SPRING_RABBITMQ_HOST
      SPRING_RABBITMQ_USERNAME: $SPRING_RABBITMQ_USERNAME
      SPRING_RABBITMQ_PASSWORD: $SPRING_RABBITMQ_PASSWORD
      middleware_url: $MIDDLEWARE_URL
      middleware_apiUrl: $MIDDLEWARE_API_URL
    logging:
      driver: gelf
      options:
        gelf-address: "$LOG_SERVER_ADDRESS"
